@startuml
title UC004 - Control Flow Diagram (Password Change)
start

:1. User enters current password, new password, and confirm new password;
:2. Submit form;

if (3. Is current password valid?) then (yes)
  :4. Validate current password;
  :5. Password validation successful;
  :6. Proceed to validate new password;
else (no)
  :7. Display current password error;
  --> [Retry]
endif

if (8. Is new password valid?) then (yes)
  :9. Validate new password;
  if (10. Is new password strong enough?) then (yes)
    :11. Check password strength;
    :12. Password strength valid;
    :13. Update password;
    --> [Success]
    :14. Display password change confirmation;
  else (no)
    :15. Display password strength error;
    --> [Retry]
  endif
else (no)
  :16. Display new password error;
  --> [Retry]
endif

if (17. Do passwords match?) then (yes)
  :18. Update password;
  :19. Password updated successfully;
  --> [Success]
  :20. Redirect to login screen;
else (no)
  :21. Display password mismatch error;
  --> [Retry]
endif

stop
@enduml
